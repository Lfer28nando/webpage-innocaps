---
import { biotechPipeline } from '../data/sectionsData';
---

<section class="relative bg-gradient-to-b from-slate-950 to-slate-900 py-32 overflow-hidden">
  <!-- Degradado superior -->
  <div class="absolute top-0 left-0 right-0 h-32 bg-gradient-to-b from-slate-950 to-transparent z-10 pointer-events-none"></div>
  
  <!-- Degradado inferior -->
  <div class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-slate-900 to-transparent z-10 pointer-events-none"></div>
  
  <!-- Grid de fondo -->
  <div class="absolute inset-0 opacity-10">
    <div class="absolute inset-0" style="background-image: linear-gradient(rgba(20, 184, 166, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(20, 184, 166, 0.1) 1px, transparent 1px); background-size: 50px 50px;"></div>
  </div>

  <div class="container mx-auto px-6 relative z-10">
    <!-- Header -->
    <div class="text-center mb-24">
      <h2 class="text-5xl md:text-6xl font-bold text-white mb-6">
        Nuestro <span class="text-transparent bg-clip-text bg-gradient-to-r from-teal-400 via-cyan-400 to-blue-400">Proceso</span>
      </h2>
      <p class="text-xl text-slate-400 max-w-3xl mx-auto">
        Un enfoque estructurado que garantiza resultados excepcionales en cada proyecto
      </p>
    </div>

    <!-- Pipeline con imágenes -->
    <div class="max-w-7xl mx-auto">
      <!-- Path SVG conectando los pasos -->
      <div class="relative mb-16">
        <svg 
          viewBox="0 0 1200 200" 
          class="w-full h-auto hidden md:block"
          xmlns="http://www.w3.org/2000/svg"
        >
          <defs>
            <linearGradient id="pathGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color: rgb(20, 184, 166); stop-opacity: 0.8" />
              <stop offset="50%" style="stop-color: rgb(34, 211, 238); stop-opacity: 0.8" />
              <stop offset="100%" style="stop-color: rgb(59, 130, 246); stop-opacity: 0.8" />
            </linearGradient>
            <filter id="glow">
              <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
              <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          <path
            id="mainPath"
            d="M 60 100 L 180 100 L 240 50 L 300 50 L 420 50 L 480 100 L 600 100 L 660 150 L 720 150 L 840 150 L 900 100 L 1020 100 L 1080 100 L 1140 100"
            fill="none"
            stroke="url(#pathGradient)"
            stroke-width="3"
            filter="url(#glow)"
            class="pipeline-path"
          />

          {biotechPipeline.map((_, index) => {
            const positions = [
              { x: 60, y: 100 },
              { x: 300, y: 50 },
              { x: 600, y: 100 },
              { x: 840, y: 150 },
              { x: 1140, y: 100 }
            ];
            const pos = positions[index];
            return (
              <g class="pipeline-node" style={`animation-delay: ${index * 0.2}s`}>
                <circle
                  cx={pos.x}
                  cy={pos.y}
                  r="20"
                  fill="rgb(20, 184, 166)"
                  class="node-pulse"
                />
                <circle
                  cx={pos.x}
                  cy={pos.y}
                  r="15"
                  fill="rgb(15, 23, 42)"
                  stroke="rgb(20, 184, 166)"
                  stroke-width="2"
                />
                <text
                  x={pos.x}
                  y={pos.y + 6}
                  text-anchor="middle"
                  fill="rgb(20, 184, 166)"
                  font-size="14"
                  font-weight="bold"
                >
                  {index + 1}
                </text>
              </g>
            );
          })}
        </svg>
      </div>

      <!-- Grid de tarjetas con imágenes -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6">
        {biotechPipeline.map((stage, index) => (
          <div 
            class="process-card group relative rounded-2xl overflow-hidden border border-slate-800 hover:border-teal-500/50 transition-all duration-500 hover:shadow-2xl hover:shadow-teal-500/20 hover:scale-105"
            style={`animation-delay: ${index * 150}ms`}
          >
            <!-- Imagen de fondo -->
            <div class="relative h-48 overflow-hidden">
              <img 
                src={stage.image} 
                alt={stage.stage}
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
              />
              <div class="absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/80 to-transparent"></div>
              
              <!-- Número del paso -->
              <div class="absolute top-4 left-4 w-12 h-12 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg">
                <span class="text-slate-900 font-bold text-lg">{index + 1}</span>
              </div>

              <!-- Ícono -->
              <div class="absolute top-4 right-4 w-12 h-12 bg-slate-900/80 backdrop-blur-sm rounded-xl flex items-center justify-center border border-teal-500/30">
                <span class="text-2xl">{stage.icon}</span>
              </div>
            </div>

            <!-- Contenido -->
            <div class="relative bg-slate-900/95 backdrop-blur-sm p-6 space-y-3">
              <h3 class="text-lg font-bold text-white group-hover:text-teal-300 transition-colors duration-300">
                {stage.stage}
              </h3>
              
              <p class="text-sm text-teal-400 font-medium">
                {stage.description}
              </p>

              <div class="h-px bg-gradient-to-r from-transparent via-teal-500/30 to-transparent"></div>

              <p class="text-xs text-slate-400 leading-relaxed">
                {stage.details}
              </p>

              <!-- Indicador hover -->
              <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-teal-500 to-cyan-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"></div>
            </div>
          </div>
        ))}
      </div>

      <!-- CTA -->
      <div class="mt-20 text-center">
        <p class="text-slate-400 mb-6 text-lg">¿Listo para transformar tu proyecto?</p>
        <button class="px-10 py-4 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-400 hover:to-cyan-400 text-slate-900 font-bold rounded-full transition-all duration-300 shadow-lg shadow-teal-500/30 hover:shadow-teal-500/50 hover:scale-105 text-lg">
          Comienza Tu Consulta
        </button>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes drawPath {
    to {
      stroke-dashoffset: 0;
    }
  }

  .pipeline-path {
    stroke-dasharray: 1200;
    stroke-dashoffset: 1200;
    animation: drawPath 2s ease-out forwards;
  }

  .pipeline-node {
    opacity: 0;
    animation: fadeInNode 0.6s ease-out forwards;
  }

  @keyframes fadeInNode {
    from {
      opacity: 0;
      transform: scale(0);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .node-pulse {
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% {
      r: 18;
      opacity: 0.4;
    }
    50% {
      r: 25;
      opacity: 0.8;
    }
  }

  .process-card {
    opacity: 0;
    animation: fadeInUp 0.8s ease-out forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>